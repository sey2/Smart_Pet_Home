import RPi.GPIO as GPIO
from picamera import PiCamera
import datetime
import time
GPIO.setmode(GPIO.BCM)
pirPin = 7
chk = 0 # 모션 감지 횟수 
count = 1 # 사진 촬영되면 저장되는 수 
while True:
    if GPIO.input(pirPin) == GPIO.LOW:
        t = time.localtime()
        print("%d:%d:%d Motion detected!" % (t.tm_hour, t.tm_min, t.tm_sec))
        chk += 1
        if chk >= 3:
            camera=PiCamera()
    #camera.start_preview()
            time.sleep(5)
            #ntime = datetime.datetime.now()
            print(ntime)
            camera.capture('/home/pi/cap%s.jpg' % count)
    #camera.stop_preview()
    camera.close()
